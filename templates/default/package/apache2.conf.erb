# apache configuration for icinga

ScriptAlias /cgi-bin/icinga <%= node['icinga']['cgi_bin'] %>
ScriptAlias /icinga/cgi-bin <%= node['icinga']['cgi_bin'] %>

# Where the stylesheets (config files) reside
Alias /icinga/stylesheets <%= node['icinga']['conf_dir'] %>/stylesheets

# Where the HTML pages live
Alias /icinga <%= node['icinga']['docroot'] %> 

<DirectoryMatch (<%= node['icinga']['docroot'] %>|<%= node['icinga']['cgi_bin']%>|<%= node['icinga']['conf_dir'] %>/stylesheets)>
	Options FollowSymLinks

	DirectoryIndex index.html

	AllowOverride AuthConfig
	Order Allow,Deny
	Allow From All

	AuthName "Icinga Access"
	AuthType Basic
	AuthUserFile <%= node['icinga']['conf_dir'] %>/htpasswd.users
	require valid-user
</DirectoryMatch>
