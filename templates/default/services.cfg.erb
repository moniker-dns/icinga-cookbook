# Icinga Service Definitions.
#
# Automatically generated by Chef.

<% @icinga_conf.each do |role, conf| -%>
# services for the <%= role %> role
  <% if conf['services'] and conf['services'].length() %>
    <% conf['services'].each do |service,params| -%>
      <% if params['enabled'] == 1 -%>
define service {
        <% params.each do |param, value| -%>
          <% unless param == 'enabled' -%>
  <%= param %> <%= if value.kind_of?(Array) then value.join(', ') else value end %>
          <% end -%>
        <% end %>
}
      <% end -%>
    <% end -%>
  <% end -%> 
<% end -%> 
